<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>Chattrbox</title>
        <meta name="description" content="Chattrbox - Chat with new people">
        <meta name="author" content="Glendon Cheney">
        <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css" >
        <link rel="stylesheet" href="/css/styles.css" type="text/css" >

        <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>     
        
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <div class="vertical-center">
                        <div class="well">
                            <div class="text-center title">
                                <h1>Welcome to Chattrbox!</h1>
                                <h2>Join A Chat</h2>
                            </div>
                            <form action="/chat.html" id="join-form">
                                <div class="form-group">
                                    <label for="name">Display Name: </label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="glyphicon glyphicon-user"></i>
                                        </span>
                                        <input type="text" name="name" id="name-input" placeholder="Name" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="room">Chat Room: </label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="glyphicon glyphicon-comment"></i>
                                        </span>
                                        <input type="text" name="room" id="room-input" placeholder="Room Name" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="text-center">
                                        <input type="submit" class="btn btn-primary btn-lg" value="Join Chat" />
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="/js/jquery-2.2.5.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            // validate join chat form 
            var $joinForm = $('#join-form');
            $joinForm.on('submit', function(e) {
                console.log('here');
                var $nameInput = $('#name-input');
                var $roomInput = $('#room-input');

                //hide old validation messages
                $('.text-danger').hide();
                $nameInput.removeClass('validation-error');
                $roomInput.removeClass('validation-error');

                //check for vlaidation success
                var validtionSuccess = true;
                if (!$nameInput.val()) {
                    $nameInput.addClass('validation-error');
                    $joinForm.prepend('<ul class="text-danger"><li>Please create a display name</li></ul>');
                    validtionSuccess = false;
                }              
                if (!$roomInput.val()) {
                    $roomInput.addClass('validation-error');
                    $joinForm.prepend('<ul class="text-danger"><li>Please enter the chat room name</li></ul>');
                    validtionSuccess = false;
                }

                return validtionSuccess;
            });

        </script>
        
    </body>
    
</html>